<?xml version="1.0" encoding="UTF-8"?>

<module name="Contrail" display-name="Contrail" image="images/opencontrail-16x16.png" version="${project.version}"
  build-number="${build.number}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="http://www.vmware.com/support/orchestrator/plugin-4-1.xsd">

  <description>Contrail plug-in for vRealize Orchestrator</description>

  <installation mode="version">
    <action type="install-package" resource="packages/o11nplugin-contrail-vro-package-${project.version}.package" />
  </installation>

  <inventory type="Root"/>
  <finder-datasources>
    <finder-datasource name="main-datasource" adaptor-class="net.juniper.contrail.vro.ContrailPluginAdaptor" concurrent-call="false" anonymous-login-mode="always" invoker-mode="direct"/>
  </finder-datasources>

  <finders>
    <finder image="images/default-16x16.png" datasource="main-datasource" java-class="net.juniper.contrail.vro.model.Connection" type="Connection">
      <description/>
      <id accessor="getName()"/>
      <properties>
        <property show-in-description="true" show-in-column="true" bean-property="host" display-name="host" name="host"/>
        <property show-in-description="true" show-in-column="true" bean-property="port" display-name="port" name="port"/>
      </properties>
    </finder>
    <finder hidden="true" datasource="main-datasource" type="Root">
      <inventory-children>
        <relation-link name="root-to-connection"/>
      </inventory-children>
      <relations>
        <relation name="root-to-connection" type="Connection"/>
      </relations>
    </finder>
  </finders>

  <scripting-objects>
    <object script-name="ContrailConnectionManager" java-class="net.juniper.contrail.vro.config.ConnectionManager"
            create="false" strict="true">
      <description/>
      <singleton script-name="ContrailConnectionManager" datasource="main-datasource"/>
      <methods>
        <method script-name="create" java-name="create" return-type="String">
          <description>Create an instance of Contrail connection</description>
          <parameters>
            <parameter type="String" name="name"/>
            <parameter type="String" name="host"/>
            <parameter type="Number" name="port"/>
            <parameter type="String" name="user"/>
            <parameter type="String" name="password"/>
          </parameters>
        </method>
        <method script-name="delete" java-name="delete" return-type="void">
          <description>Delete an instance of Contrail connection</description>
          <parameters>
            <parameter type="ContrailConnection" name="connection"/>
          </parameters>
        </method>
      </methods>
    </object>
  </scripting-objects>
</module>
